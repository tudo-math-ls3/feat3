<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FEAT: FEAT for Visual Studio 2022 on Windows systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FEAT<span id="projectnumber">&#160;3</span>
   </div>
   <div id="projectbrief">Finite Element Analysis Toolbox</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('feat_for_win_vs17.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> for Visual Studio 2022 on Windows systems </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#win_vs17_prereqs">Prerequisites</a><ul><li class="level2"><a href="#win_vs17_prereqs_vs">Microsoft Visual Studio 2022</a><ul><li class="level3"><a href="#win_vs17_pathvar">Setting the Visual Studio path environment variable</a></li>
</ul>
</li>
<li class="level2"><a href="#win_vs17_prereqs_python">Python 3 Interpreter</a></li>
<li class="level2"><a href="#win_vs17_prereqs_mpi">Microsoft MPI</a></li>
<li class="level2"><a href="#win_vs17_prereqs_cuda">Nvidia CUDA v11.8</a></li>
<li class="level2"><a href="#win_vs17_prereqs_imkl">Intel oneAPI MKL</a></li>
</ul>
</li>
<li class="level1"><a href="#win_vs17_thirdparty">Additional Third-Party Libraries</a></li>
<li class="level1"><a href="#win_vs17_vcgen_tool">Creating Visual Studio Project and Solution files</a><ul><li class="level2"><a href="#win_vs17_buildsys_vc_symlink">Creating Kernel Symlink</a></li>
<li class="level2"><a href="#win_vs17_vcgen_use_empty">Generating Empty Application Projects</a></li>
<li class="level2"><a href="#win_vs17_vcgen_use_app_simple">Generating Simple Application Projects</a></li>
<li class="level2"><a href="#win_vs17_vcgen_use_test">Generating Kernel Unit-Test Projects</a></li>
<li class="level2"><a href="#win_vs17_kernel_project">The kernel Project file</a></li>
</ul>
</li>
<li class="level1"><a href="#win_vs17_build_config">Build Configurations and Platforms</a></li>
</ul>
</div>
<div class="textblock"><p >This page describes the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> Visual Studio 2022 build system for Windows systems.</p>
<h1><a class="anchor" id="win_vs17_prereqs"></a>
Prerequisites</h1>
<p >From Visual Studio 2022 on, the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> build system for Windows does not support 32-bit builds anymore, so in consequence you require a x64 Windows operating system, a x64 based Visual Studio installation as well as a x64 Python environment, all of which should be standard by now, almost 20 years after AMD first released its Athlon 64 CPU...</p>
<h2><a class="anchor" id="win_vs17_prereqs_vs"></a>
Microsoft Visual Studio 2022</h2>
<p >To compile and use <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> under Windows, you (obviously) require <b>Microsoft Visual Studio 2022</b> (any edition). Note that the free <em>Community</em> edition of Visual Studio 202 is perfectly sufficient, which can be obtained from here:</p><ul>
<li><a href="https://visualstudio.microsoft.com/downloads">https://visualstudio.microsoft.com/downloads</a></li>
</ul>
<h3><a class="anchor" id="win_vs17_pathvar"></a>
Setting the Visual Studio path environment variable</h3>
<p >Unfortunately, Visual Studio 2022 does not set any environment variable that specifies its installation path anymore, so this has to be done by hand. To do so, you have to define an environment variable called <code>VS17PATH</code>. If you have installed Visual Studio 2022 Community in the default location, you can run the following command in a console with administrator rights to set the environment variable: </p><pre class="fragment">setx VS17PATH "C:\Program Files\Microsoft Visual Studio\2022\Community"
</pre><p> If you have installed Visual Studio in another directory, then you have to adjust the path accordingly.</p>
<h2><a class="anchor" id="win_vs17_prereqs_python"></a>
Python 3 Interpreter</h2>
<p >Some parts of the build system are written in Python, namely the third-party library assistant script as well as the Visual Studio project file generator script. Fortunately, Visual Studo 2022 comes with a Python development package included, so just make sure to install this package when installing Visual Studio on your system. You do not need to install any additional Python packages manually, because all the scripts used by the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> build system require only the Python standard libraries.</p>
<dl class="section note"><dt>Note</dt><dd>In theory, all scripts should work just fine in a 32-bit Python environment, but we still recommend finally arriving in the 21st century and using a 64-bit Python environment.</dd></dl>
<h2><a class="anchor" id="win_vs17_prereqs_mpi"></a>
Microsoft MPI</h2>
<p >If you want to make use of <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>'s parallel computing capability, you will also need to install the <b>Microsoft MPI</b> library as well as the corresponding SDK. Note that installing MPI is <b>not</b> mandatory, however, without this library, <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> is limited to its "single-process" functionality.</p>
<dl class="section note"><dt>Note</dt><dd>Previous attempts to support other MPI implementations such as <code>MPICH</code> or <code>OpenMPI</code> in combination with Visual Studio have not been successful, so these (and other) implementations are officially unsupported by the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> Visual Studio build-system. Sorry for the inconvenience.</dd></dl>
<p>You can download the latest version of the MS-MPI library here:</p><ul>
<li><a href="https://learn.microsoft.com/en-us/message-passing-interface/microsoft-mpi">https://learn.microsoft.com/en-us/message-passing-interface/microsoft-mpi</a></li>
<li><b>Important:</b> You need to download and install <b>both</b> <code>MSMpiSetup.exe</code> and <code>msmpisdk.msi</code>.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>From MS-MPI Version 7 on, you will need to enable the <em>MS-MPI Launch Service</em> to <em>start automatically</em> on your windows machine, as otherwise MPI-based applications may not start. The easiest way to do so is to execute the following command in a console (with administrator rights): <pre class="fragment">sc config MsMpiLaunchSvc start= auto
</pre></dd></dl>
<p>Once you have installed MS-MPI and setup the launch service, there is nothing more to do, as the build-system will automatically detect that a MPI implementation is available.</p>
<h2><a class="anchor" id="win_vs17_prereqs_cuda"></a>
Nvidia CUDA v11.8</h2>
<p >Currently, the only supported version of Nvidia CUDA is version 11.8, which must be installed including its integration into Visual Studio 2022, of course. There is nothing else that has to be done manually to enable CUDA in <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>; simply select a build configuration that contains the <code>cuda</code> tag to enable CUDA in <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>.</p>
<h2><a class="anchor" id="win_vs17_prereqs_imkl"></a>
Intel oneAPI MKL</h2>
<p >The Visual Studio build system supports the use of Intel oneAPI MKL, assuming that it is installed on the system, of course. There is nothing else that has to be done manually to enable MKL in <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>; simply select a build configuration that contains the <code>mkl</code> tag to enable MKL in <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>. The only version that has been tested to work is 2023.1.0, but we expect that any newer version will work as well.</p>
<h1><a class="anchor" id="win_vs17_thirdparty"></a>
Additional Third-Party Libraries</h1>
<p ><a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> supports a set of third-party libraries, which can be included to extend the functionality offered by <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>. Note that all third-party libraries are <em>opt-in</em>, i.e. you are not forced to use any of these libraries, but you may as well use <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> without any additional libraries (a.k.a. "naked build") &ndash; the drawback is that you will only have reduced functionality, of course.</p>
<dl class="section attention"><dt>Attention</dt><dd>Please note that each third-party library comes with its own license, which may or may not be suitable for you. Please consult each library's license before installing it. The license of each library can be displayed in the assistant script (see below).</dd></dl>
<p>Currently, all additional libraries are downloaded from the internet and built from source, i.e. it is not necessary to install the libraries manually. To manage your third-party libraries, please execute the <code>vc17-thirdparty.py</code> Python script, which is located in the <code>thirdpart</code> subdirectory of your <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory. This assistant script lists all third-party libraries, which are currently available for your <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> checkout, and enables you to conveniently download, unpack and compile all packages without any additional manual steps. Simply execute the script (in a console) and follow the instructions.</p>
<dl class="section note"><dt>Note</dt><dd>If you intend to use MPI in your <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> builds, then tt is highly recommended that you install <a class="el" href="feat_for_win_vs17.html#win_vs17_prereqs_mpi">Microsoft MPI</a> <b>before</b> compiling the third-party libraries, because some libraries require MPI to be compiled. However, you can re-run the third-party assistant script at any time and compile the additional libraries later, if you missed the MPI compilation in the first place.</dd></dl>
<h1><a class="anchor" id="win_vs17_vcgen_tool"></a>
Creating Visual Studio Project and Solution files</h1>
<p >Before you can compile any <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> application, test or tutorial with Visual Studio, you will first need generate a corresponding Visual Studio project and solution file. In contrast to the CMake-based build-system used under Linux, there is no "configure" script that will generate all required projects and solution in one step.</p>
<p >Instead, you need to generate VS project and solution files for each desired application, tutorial or kernel test separately by using a Python script named <code>vc17-gen.py</code>, which is located in the root directory of <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a>.</p>
<p >The usage and the behavior of the script depends on whether the desired target is a kernel test or any other sort of application (this includes tutorials and tools). The usage of the tool is also described in the following sub-sections.</p>
<h2><a class="anchor" id="win_vs17_buildsys_vc_symlink"></a>
Creating Kernel Symlink</h2>
<p >Before you can use the Visual Studio build system, you first need to perform an inconvenient but necessary step to circumvent Visual Studio's internal limitations by creating a symbolic link for the kernel directory. To do this, open a command prompt in the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory and execute the following command (with administrator rights):</p>
<pre class="fragment">mklink /D build_system\vc17\kernel ..\..\kernel
</pre><h2><a class="anchor" id="win_vs17_vcgen_use_empty"></a>
Generating Empty Application Projects</h2>
<p >To generate a new empty project and solution file pair for any sort of application (this includes tutorials and tools), open a console in the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory and use the following command to specify the path to where the project file is to be created as well as its desired project name and, optionally, the list of all source files that are to be added to the newly created project file: </p><pre class="fragment">vc17-gen.py &lt;project-path&gt; &lt;project-name&gt; [&lt;source-files...&gt;]
</pre><dl class="section note"><dt>Note</dt><dd>The script automatically detects the source file type by its file extension.</dd></dl>
<p><b>Example:</b><br  />
To generate a project file for the first tutorial and compile it, you will need to perform the following steps:</p><ol type="1">
<li>Open a console in the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory.</li>
<li>Enter the following command to create the project file <code>tutorial-01-poisson.vc17.vcxproj</code> as well as the corresponding solution file <code>tutorial-01-poisson.vc17.sln</code> residing in the <code>tutorials</code> directory: <pre class="fragment">vc17-gen.py tutorials tutorial-01-poisson tutorials\tutorial_01_poisson.cpp
</pre></li>
<li>Open the new solution file. This solution file will contain two projects:<ul>
<li>The application project <code>tutorial-01-poisson.vc17</code></li>
<li>The <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> kernel project <code>kernel.vc17</code></li>
</ul>
</li>
<li>Choose a build configuration, e.g. the debug configuration namend <code>dbg</code> for the 64-bit platform <code>x64</code>.</li>
<li>Build the solution.</li>
<li>The resulting executable application binary <code>tutorial-01-poisson.vc17-dbg-x64.exe</code> will appear in the <code>tutorials</code> sub-directory of the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory.</li>
</ol>
<h2><a class="anchor" id="win_vs17_vcgen_use_app_simple"></a>
Generating Simple Application Projects</h2>
<p >If you are too lazy to specify paths and project names, you might also use the following command to generate a simple application project and solution file pair with the same name and path as the first of the given source files: </p><pre class="fragment">vc17-gen.py -app &lt;source-paths...&gt;
</pre><p ><b>Example:</b><br  />
To generate a project file for the first tutorial and compile it, you will need to perform the following steps:</p><ol type="1">
<li>Open a console in the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory.</li>
<li>Enter the following command to create the project file <code>tutorial_01_poisson.vc17.vcxproj</code> as well as the corresponding solution file <code>tutorial_01-poisson.vc17.sln</code> residing in the <code>tutorials</code> directory: <pre class="fragment">vc17-gen.py -app tutorials\tutorial_01_poisson.cpp
</pre></li>
<li>From here on, it's pretty much the same steps as in the previous example.</li>
</ol>
<h2><a class="anchor" id="win_vs17_vcgen_use_test"></a>
Generating Kernel Unit-Test Projects</h2>
<p >The basic command to generate a project file for a kernel unit test is: </p><pre class="fragment">vc17-gen.py -test &lt;test-source-path...&gt;
</pre><p> This command will create a directory named <code>testing</code> in the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory, which contains the corresponding project and solution file, possibly in a sub-directory that coincides with the path of the test source file within the <code>kernel</code> subdirectory.</p>
<p ><b>Example:</b><br  />
To generate a project file for the <code>tiny_algebra-test</code>, which is implemented in the source file <code>kernel\util\tiny_algebra-test.cpp</code>, you will need to perform the following steps:</p><ol type="1">
<li>Open a console in the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory.</li>
<li>Enter the following command to create the project file <code>tiny_algebra-test.vc17.vcxproj</code> as well as the corresponding solution file <code>tiny_algebra-test.vc17.sln</code> residing in the <code>testing\util</code> directory: <pre class="fragment">vc17-gen.py -test kernel\util\tiny_algebra-test.cpp
</pre></li>
<li>Open the solution file <code>testing\util\tiny_algebra-test.vc17.sln</code><br  />
 <b>Note:</b> In constrast to application projects, unit test projects also contain some additional source files which may be required by some tests, but which are not compiled into the kernel, so they have to be compiled by the unit test project instead.</li>
<li>Choose a build configuration, e.g. the debug configuration namend <code>dbg</code> for the 64-bit platform <code>x64</code>.</li>
<li>Build the solution.</li>
<li>The resulting executable test binary <code>tiny_algebra-test.vc17-dbg-x64.exe</code> will appear in the <code>win</code> sub-directory of the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> root directory.</li>
</ol>
<h2><a class="anchor" id="win_vs17_kernel_project"></a>
The kernel Project file</h2>
<p >All solution files generated by the <code>vc17-gen.py</code> tool contain two projects: one project for the actual target binary as well as one project for the <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> kernel library named <code>kernel.vc17</code>. This kernel project file is <em>not</em> generated by the <code>vc17-gen.py</code> tool &ndash; it is a hand-written project file that is located in the <code>build_system/vc17</code> directory and it is shared among all target applications.</p>
<dl class="section attention"><dt>Attention</dt><dd>Do <u><b>not</b></u> add or remove files to/from the kernel project file. This project is configured to automatically include <em>all</em> relevant source and header files within the <code>kernel</code> directory, i.e. the project will detect new or deleted files automatically without any explicit modification from the user after it has been reloaded.</dd>
<dd>
Furthermore, it is highly recommended to leave the compiler options specified in the <code>kernel</code> project unchanged.</dd></dl>
<h1><a class="anchor" id="win_vs17_build_config"></a>
Build Configurations and Platforms</h1>
<p >The project and solution files generated by the <code>vc17-gen.py</code> script contain a set of supported build configurations and platforms, which can be selected in the Visual Studio IDE to specify the build target. Currently, the only supported platform is the <code>x64</code> platform; support for the 32-bit <code>x86</code> platform has been discontinued by <a class="el" href="namespace_f_e_a_t.html" title="FEAT namespace.">FEAT</a> and the <code>ARM</code> platform is not yet supported.</p>
<p >The set of supported build configurations is given as thew cross-product of various enabled features, where the name of the build configuration is a string containing <em>tags</em>, which represent the corresponding features. This is quite similar to the <em>build-id</em> concept of the <code>configure</code> script for Lunix systems.</p>
<p >The list of all supported (and currently disabled) features is:</p><ul>
<li><code>dbg</code>: generate a debug binary (mutually exclusive with <code>opt</code>)</li>
<li><code>opt</code>: generate an optimized binary (mutually exclusive with <code>dbg</code>)</li>
<li><code>mpi</code>: build with MPI support (requires MS-MPI to be installed)</li>
<li><code>cuda</code> build with Nvidia CUDA support (requires Nvidia CUDA 11.8 to be installed)</li>
<li><code>mkl</code>: build with Intel MKL support (requires Intel oneAPI MKL 2023 or newer to be installed)</li>
<li><code>omp</code>: build with OpenMP support</li>
</ul>
<p >So, for example the configuration <code>dbg</code> represents a simple debug build without any additional features such as MPI or CUDA, whereas <code>opt-mpi</code> represents an optimized build including MPI support.</p>
<p >The filename of a compiled application binary is then concatenated of the project name, the build configuration and the target platform. This enables you to compile and use various build configurations for different target platforms side-by-side without having to recompile.</p>
<p >For example, the application binary filename <code>tutorial-01-poisson.vc17-dbg-mpi-x64.exe</code> represents:</p><ul>
<li>the binary of the project <code>tutorial-01-poisson</code></li>
<li>compiled with the <code>vc17</code> compiler (aka Visual C++ 2022)</li>
<li>build with the <code>dbg-mpi</code> configuration</li>
<li>for the <code>x64</code> target platform</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Peter Zajac </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
